const transactionSchema = new mongoose.Schema({
  driver: { 
    type: mongoose.Schema.Types.ObjectId, 
    ref: 'Driver',
    required: true
  },
  trip: { 
    type: mongoose.Schema.Types.ObjectId, 
    ref: 'Trip'
  },
  
  type: {
    type: String,
    enum: ['trip_earning', 'withdrawal', 'commission', 'bonus', 'penalty'],
    required: true
  },
  
  amount: { type: Number, required: true },
  
  // Pozitif: Gelir, Negatif: Gider
  balanceType: {
    type: String,
    enum: ['credit', 'debit'],
    required: true
  },
  
  description: { type: String },
  
  // İşlem öncesi ve sonrası bakiye
  balanceBefore: { type: Number },
  balanceAfter: { type: Number }
}, { timestamps: true });

export const Transaction = mongoose.model('Transaction', transactionSchema);
